<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="description" content="Aplicacion web para la plataforma venesalud" />
  <meta name="keywords" content="salud, prevencion, venezolanos, cali, rutas de atencion, educacion" />
  <title>Venesalud</title>
  <!-- // Antiguo .css
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    -->

  <!-- Web Normalize .css -->
  <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">

  <!-- Link al .css de sass -->
  <link rel="stylesheet" href="./styles/styles.css">

  <!-- Import de la tipografia -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400&display=swap" rel="stylesheet">

</head>

<body>

  <!--The Gmaps library and key-->
  <section class="gmaps" style="display: flex;">
    <div id="map"></div>
  </section>




  <!-- // Landing page antiguo
  <div class="form-box">
    <h1>Login Here</h1>
    <div class="input-box">
        <i class="fa fa-user"></i>
        <input type="email" placeholder="Usuario" class="inputUser">
    </div>
    <div class="input-box">
        <i class="fa fa-key"></i>
        <input type="password" placeholder="Contraseña" class="inputPassword">
        <span class="eye">
            <i id="hide1" class="fa fa-eye"></i>
            <i id="hide2" class="fa fa-eye-slash"></i>
        </span>
    </div>
    <button type="button" class="login-btn">LOGIN</button>
</div>
-->
  <main class="landingLogIn" style="display: none;">
    <div class="landingLogIn__Logo">
      <img class="landingLogIn__LogoImg" src="./Images/Logo-Completo-Pequeño.png" alt="">
    </div>
    <section class="landingLogIn__form">
      <input type="email" placeholder="Usuario" class="landingLogIn__input landingLogIn__input--user">
      <input type="password" placeholder="Contraseña" class="landingLogIn__input landingLogIn__input--password">
      <button class="landingLogIn__passwordForgotten">¿Olvidaste tu contraseña?</p>

        <input type="button" value="Iniciar sesión" class="landingLogIn__logIn">
        <p class="landingLogIn__createAccount">No tienes cuenta aún?<button
            class="landingLogIn__createAccountBtn"><strong>Registrate</strong></p>
    </section>
  </main>

  <main class="landingRegister" style="display: none;">
    <img class="landingRegister__logo" src="./Images/Logo-Completo-Pequeño.png" alt="">
    <section class="landingRegister__form">
      <input type="text" placeholder="Nombre de usuario" class="landingRegister__input landingRegister__input--user">
      <input type="email" placeholder="Correo electronico" class="landingRegister__input landingRegister__input--mail">
      <input type="password" placeholder="Contraseña" class="landingRegister__input landingRegister__input--password">

      <!-- cambie el button para poder que salga la pantalla inicial mientras-->
      <!-- 
        <button type="button" class="landingR__register">Regístrate</button>
      -->
      <button class="landingRegister__register">Registrate</button>
    </section>
  </main>

  <main class="initialScreen" style="display: none;">
    <div class="initialScreen__logo">
      <img class="initialScreen__logoImg" src="./Images/Logo-Completo-Pequeño.png" alt="">
    </div>
    <section class="initialScreen__clickScreens">
      <div class="initialScreen__clickScreens__item initialScreen__clickScreens__item--large">
        <img class="initialScreen__clickScreens__item--large--img" src="./Images/LavadoDeManos.jpg" alt="">
        <p class="initialScreen__clickScreens__item--large--title"><strong>Lavado de Manos</strong></p>
        <p class="initialScreen__clickScreens__item--large--text">Ver la más reciente campaña de prevención en tendencia
          esta semana</p>
      </div>
      <div class="initialScreen__clickScreens__item initialScreen__clickScreens__item--short">
        <div class="initialScreen__clickScreens__item--short--img">
          <img class="initialScreen__clickScreens__item--short--imgJpg" src="./Images/Home-Buscador.png" alt="">
        </div>
        <p class="initialScreen__clickScreens__item--short--title"><strong>Buscador de sintomas</strong></p>
        <p class="initialScreen__clickScreens__item--short--text">Resuelve un formulario que nos ayudará a entender que
          es lo que estás padeciendo</p>
      </div>
      <a class="goToDisease">
        <div class="initialScreen__clickScreens__item initialScreen__clickScreens__item--short">
          <div class="initialScreen__clickScreens__item--short--img">
            <img class="initialScreen__clickScreens__item--short--imgJpg" src="./Images/Home-Enfermedades.png" alt="">
          </div>
          <p class="initialScreen__clickScreens__item--short--title"><strong>Enfermedades</strong></p>
          <p class="initialScreen__clickScreens__item--short--text">Toda la información acerca de los problemas de salud
            más habituales</p>
        </div>
      </a>
      <div class="initialScreen__clickScreens__item initialScreen__clickScreens__item--large">
        <img class="initialScreen__clickScreens__item--large--img" src="./Images/homeRutas.jpg" alt="">
        <p class="initialScreen__clickScreens__item--large--title"><strong>Rutas de atención</strong></p>
        <p class="initialScreen__clickScreens__item--large--text">Conoce dónde pueden atender tu enfermedad</p>
      </div>
    </section>
  </main>


  <main class="disease" style="display: none;">
    <main>
      <h1>¿Cuales son tus sintomas?</h1>
    </main>
    <img src="./Images/back.png" alt="">
    <img src="./Images/logo_solo.png" alt="">
    <div class="disease__info">
      <p class="disease__infotext disease__info__text--title" id="diseaseTitle">Dengue</p>
      <p class="disease__infotext disease__info__text--content" id="diseaseDescription">Es una infección viral
        transmitida por la picadura de los
        mosquitos hembra del género Aedes, la cual se ha constituido como un problema creciente para la salud pública
        mundial.</p>
    </div>
    <div class="disease__symptoms">
      <img src="./Images/neutralMan.png" alt="">
      <input type="button" value="Dolor en huesos y articulaciones">
    </div>
    <div class="disease__actions">
      <p class="disease__actions__text disease__actions__text--title"><strong>¿Por qué sucede?</strong></p>
      <p class="disease__actions__text disease__actions__text--content">Este virus se propaga debido a la picadura de
        los
        mosquitos hembra, principalmente de la especie Aedes aegypti.</p>
      <div class="disease__actions__item disease__actions__item--short">
        <div class="disease__actionsitem--short--img">
          <img class="disease__actionsitem--short--imgJpg" src="./Images/Home-Enfermedades.png" alt="">
        </div>
        <p class="disease__actions__item--short--title">Ver en el mapa</p>
      </div>
      <div class="disease__actions__item disease__actions__item--short">
        <div class="disease__actions__item--short--img">
          <img class="disease__actions__item--short--imgJpg" src="./Images/Home-Enfermedades.png" alt="">
        </div>
        <p class="diseaseactions__item--short--title">Ver video</p>
      </div>
    </div>
    <input type="button" value="Ir al mapa" class="gomap">
  </main>

  <main class="symptomSel" style="display: none;">
    <div class="symptomSel__top">
      <a class="symptomSel__back">
        <img src="./Images/back.png" alt="">
      </a>
      <img src="./Images/logo_solo.png" class="symptomSel__logo" alt="">
    </div>

    <h1 class="symptomSel__title">Selecciona tus sintomas</h1>

    <div class="symptomSel__mainform"></div>
    <button class="symptomSel__send">Siguiente</button>

  </main>

  <nav class="navegationBar" style="display: none;">
    <a class="navegationBar__HomeBtn">
      <section class="navegationBar__Home">
        <img class="navegationBar__image navegationBar__Home--On" src="./Images/Icono-home Off.png" alt="">
        <img class="navegationBar__image navegationBar__Home--Off" src="" alt="">
      </section>
    </a>
    <section class="navegationBar__Search">
      <img class="navegationBar__image navegationBar__Search--On" src="./Images/Home-Buscador.png" alt="">
      <img class="navegationBar__image navegationBar__Search--Off" src="" alt="">
    </section>
    <section class="navegationBar__Diseases">
      <img class="navegationBar__image navegationBar__Diseases--On" src="./Images/Icono-virus Off.png" alt="">
      <img class="navegationBar__image navegationBar__Diseases--Off" src="" alt="">
    </section>
    <section class="navegationBar__User">
      <img class="navegationBar__image navegationBar__User--On" src="./Images/Icono-User.png" alt="">
      <img class="navegationBar__image navegationBar__User--Off" src="./Images/Icono-usuario-blanco Off.png" alt="">
    </section>
  </nav>

  <script src="./data/helpCenterData.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
  <script src="./model/AttentionPath.js"></script>
  <script src="./model/HelpCenter.js"></script>
  <script src="./model/User.js"></script>
  <script src="./model/LoginFrontEnd.js"></script>
  <script src="./model/Disease.js"></script>
  <script src="./model/Family.js"></script>
  <script src="./model/Logic.js"></script>
  <script src="./controller/Controller.js"></script>

  <script>
    function iniciarMap() {
        var coord = { lat: 3.3416852, lng: -76.5298551 };
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 10,
            center: coord
        });

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                map.setCenter(pos);

                coordenadasArray(map, pos);
            }, function () {
                //handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
            // Browser doesn't support Geolocation
            //handleLocationError(false, infoWindow, map.getCenter());
        }

        console.log("Iniciar map");




        /*
              function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                infoWindow.setPosition(pos);
                infoWindow.setContent(browserHasGeolocation ?
                                      'Error: The Geolocation service failed.' :
                                      'Error: Your browser doesn\'t support geolocation.');
                infoWindow.open(map);
              }
      
             this.coordenadasArray(map); 
          */


    }


    function coordenadasArray(map, userPos) {
        var coordenada = [];
        var lat;
        var lng;
        for (let index = 0; index < 87; index++) {
            var coord = { lat: helpCenterArray[index].Latitud, lng: helpCenterArray[index].Longitud };
            coordenada[index] = coord;
            lat = parseFloat(coordenada[index].lat);
            lng = parseFloat(coordenada[index].lng);
            console.log(getKilometros(lat, lng, userPos.lat, userPos.lng));
            if(getKilometros(lat, lng, userPos.lat, userPos.lng)<5){
                var myLatlng = new google.maps.LatLng(parseFloat(lat), parseFloat(lng));
                //console.log(lng);
    
                var marker = new google.maps.Marker({
                    position: { lat: lat, lng: lng },
                    map: map
                });
            }
            
            
        }


    }

    function getKilometros (lat1, lon1, lat2, lon2) {
        var rad = function (x) { return x * Math.PI / 180; }
        var R = 6378.137; //Radio de la tierra en km
        var dLat = rad(lat2 - lat1);
        var dLong = rad(lon2 - lon1);
        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(rad(lat1)) * Math.cos(rad(lat2)) * Math.sin(dLong / 2) * Math.sin(dLong / 2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        var d = R * c;
        return d.toFixed(3); //Retorna tres decimales
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDaeWicvigtP9xPv919E-RNoxfvC-Hqik&callback=iniciarMap"></script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->


  <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
  <script src="./view/Main.js"></script>


  <script>


  </script>


</body>

</html>